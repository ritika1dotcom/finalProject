{% extends "base.html" %}

{% block content %}
<div class="flex justify-center">
    <section>
        {% if request.user.is_authenticated %}
            <h2 class="font-semibold text-lg py-2">Hello {{ request.user.username }}</h2>
        {% else %}
            <h2 class="font-semibold text-lg py-2">Welcome, Guest!</h2>
        {% endif %}
        
        <h2>Top Nepali Songs</h2>
        <div class="flex flex-wrap justify-between">
            {% for track in featured_tracks %}
            <div {% if user.is_authenticated %} onclick="playSong('{{ track.preview_url }}', '{{ track.name }}', '{{ track.artist_name }}','{{track.album_image}}')" {% else %} onclick="showLoginAlert()" {% endif %}>
                <div class="card" style="width: 13rem; margin-bottom: 20px;">
                    <img class="card-img-top" src="{{ track.album_image }}" alt="{{ track.album_name }}">
                    <div class="card-body scrollable-content">
                        <h2 class="text-green-600 text-base">{{ track.name }}</h2>
                        <h3>By <strong>{{ track.artist_name }}</strong></h3>
                        <p>Popularity: {{ track.track_popularity }}</p>
                        <p>Genres: {{ track.artist_genres }}</p>
                        <!-- {% if user.is_authenticated %}
                            <button onclick="playSong('{{ track.preview_url }}', '{{ track.name }}', '{{ track.artist_name }}','{{track.album_image}}')" class="bg-gray-600 border border-green-700 hover:bg-green-700 text-white font-bold py-1 px-2 rounded">
                                Play
                            </button>
                        {% endif %}                     -->
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>        
    </section>
</div>
<script>
    function showLoginAlert() {
        alert("Please log in to access this feature.");
        // You can add more sophisticated handling, e.g., redirect to the login page
    }
</script>
{% endblock %}
